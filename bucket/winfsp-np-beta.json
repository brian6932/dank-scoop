{
    "version": "2.0.22327",
    "description": "Set of software components that allows the creation of user mode file systems.",
    "homepage": "https://winfsp.dev/",
    "license": "GPL-3.0-only",
    "url": "https://github.com/winfsp/winfsp/releases/download/v2.0B1/winfsp-2.0.22327.msi#/setup.msi_",
    "hash": "282609e174c22e7222bb7b00dc40b45d8c4c3b42e04b0ecfc1f42eba9d27434e",
    "installer": {
        "script": [
            "Invoke-ExternalCommand msiexec.exe -ArgumentList @('/i', \"$dir\\setup.msi_\", 'ADDLOCAL=F.Developer,F.KernelDeveloper', \"/qn /norestart INSTALLLEVEL=1000 INSTALLDIR=$dir\") -RunAs | Out-Null",
            "if ($architecture -eq 'arm64') { $arch = '-a64' } else { $arch = \"-x$($architecture.Substring(0, 2))\" }",
            "'fsptool', 'launchctl', 'launcher', 'memfs' | ForEach-Object { Get-ChildItem \"$dir\\bin\\$_$arch.exe\" } | Rename-Item -NewName { $_.name -Replace $arch }"
        ]
    },
    "pre_uninstall": [
        "'sshfs*', 'ssh', 'explorer' | ForEach-Object { Stop-Process -Force -Name $_ -ErrorAction SilentlyContinue }",
        "'WinFsp.Launcher', 'WinFsp', 'StorSvc' | ForEach-Object { sc.exe stop $_ | Out-Null }"
    ],
    "uninstaller": {
        "script": [
            "Invoke-ExternalCommand msiexec.exe -ArgumentList @('/x', \"$dir\\setup.msi_\", '/qn /norestart') -RunAs | Out-Null",
            "Start-Process -Wait -NoNewWindow explorer.exe",
            "sc.exe start StorSvc | Out-Null"
        ]
    },
    "bin": [
        "bin\\fsptool.exe",
        "bin\\launchctl.exe",
        "bin\\launcher.exe",
        "bin\\memfs.exe"
    ],
    "checkver": {
        "url": "https://api.github.com/repositories/59151203/releases",
        "jsonpath": "$.[0].assets[0].browser_download_url",
        "regex": "v(?<tag>[\\w.]+)/winfsp-([\\d.]+).msi"
    },
    "autoupdate": {
        "url": "https://github.com/winfsp/winfsp/releases/download/v$matchTag/winfsp-$version.msi#/setup.msi_"
    }
}
